"use strict";(self.webpackChunkdev_shipperhq=self.webpackChunkdev_shipperhq||[]).push([[5758],{3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return d}});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,l=p(e,["components","mdxType","originalType","parentName"]),h=c(n),d=a,m=h["".concat(s,".").concat(d)]||h[d]||u[d]||r;return n?o.createElement(m,i(i({ref:t},l),{},{components:n})):o.createElement(m,i({ref:t},l))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=h;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:a,i[1]=p;for(var c=2;c<r;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},4231:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return p},metadata:function(){return c},toc:function(){return u}});var o=n(3117),a=n(102),r=(n(7294),n(3905)),i=["components"],p={sidebar_position:6,slug:"sdk",title:"Enhanced Checkout SDK",tags:["sdk","enhanced checkout","ec"]},s=void 0,c={unversionedId:"sdk",id:"sdk",title:"Enhanced Checkout SDK",description:"The goal of the ShipperHQ Enhanced Checkout SDK is to give you access to our checkout components, so you can build your own custom checkout experience. Below you'll find general information that applies to the ShipperHQ Enhanced Checkout SDK.",source:"@site/docs/sdk.md",sourceDirName:".",slug:"/sdk",permalink:"/docs/sdk",tags:[{label:"sdk",permalink:"/docs/tags/sdk"},{label:"enhanced checkout",permalink:"/docs/tags/enhanced-checkout"},{label:"ec",permalink:"/docs/tags/ec"}],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,slug:"sdk",title:"Enhanced Checkout SDK",tags:["sdk","enhanced checkout","ec"]}},l={},u=[{value:"Background",id:"background",level:2},{value:"RMC Skeleton Application",id:"rmc-skeleton-application",level:2},{value:"Checkout Setup",id:"checkout-setup",level:2},{value:"Data Flow in Enhanced Checkout",id:"data-flow-in-enhanced-checkout",level:2},{value:"React Components",id:"react-components",level:2},{value:"Global State",id:"global-state",level:2}],h={toc:u};function d(e){var t=e.components,n=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,o.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The goal of the ShipperHQ Enhanced Checkout SDK is to give you access to our checkout components, so you can build your own custom checkout experience. Below you'll find general information that applies to the ShipperHQ Enhanced Checkout SDK."),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Enhanced Checkout SDK Available on ShipperHQ Enterprise")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Access to the Enhanced Checkout SDK requires a ShipperHQ Enterprise plan. You can check your current plan in ",(0,r.kt)("a",{parentName:"p",href:"https://docs.shipperhq.com/subscription/#What_plan_am_I_on"},"your ShipperHQ Dashboard"),". If you're not currently on an Enterprise plan, please ",(0,r.kt)("a",{parentName:"p",href:"https://shipperhq.com/contact"},"contact us")," to review upgrade options."),(0,r.kt)("p",{parentName:"div"},(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"Note:"))," This requirement does not apply to ShipperHQ Partners. Contact our ",(0,r.kt)("a",{parentName:"p",href:"https://shipperhq.com/contact"},"Partnerships team")," for more info."))),(0,r.kt)("h2",{id:"background"},"Background"),(0,r.kt)("p",null,"Visit ",(0,r.kt)("a",{parentName:"p",href:"https://shipperhq.com/enhanced-checkout"},"our docs")," to read about our Enhanced Checkout product."),(0,r.kt)("h2",{id:"rmc-skeleton-application"},"RMC Skeleton Application"),(0,r.kt)("p",null,"The RMC Skeleton Application is an example app that demonstrates how to use our rate manager client in a React application. This is a great starting point for building your own checkout experience. "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"You can find the RMC Skeleton Application in our ",(0,r.kt)("a",{parentName:"p",href:"https://gitlab.com/ShipperHQ/Platform/rmc-example-app"},"GitHub repository"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Clone repo locally using this command and access token in place of ACCESS-TOKEN-HERE. We will provide you with an access token."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"git clone https://oauth2:ACCESS-TOKEN-HERE@gitlab.com/ShipperHQ/Platform/rmc-example-app.git\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Follow the instructions in the README to get started.")),(0,r.kt)("h2",{id:"checkout-setup"},"Checkout Setup"),(0,r.kt)("p",null,"First, you will need to sync your ShipperHQ account to your checkout."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Set the scope dropdown to match the scope of your SHQ account"),(0,r.kt)("li",{parentName:"ol"},"Get your SHQ API key from the SHQ dashboard in Websites > Basic > API Key. Paste that into the checkout. "),(0,r.kt)("li",{parentName:"ol"},"In the same section of the dashboard, generate a new auth code if you don\u2019t already have one. Paste that into the auth code field in the checkout. "),(0,r.kt)("li",{parentName:"ol"},"Generate a token")),(0,r.kt)("p",null,"After generating the token, a random dummy address will be generated. You can replace this with the location you would like to ship your item(s). "),(0,r.kt)("p",null,"You can add dummy items to your cart. Fetch rates, choose your shipping method, and finalize shipping."),(0,r.kt)("h2",{id:"data-flow-in-enhanced-checkout"},"Data Flow in Enhanced Checkout"),(0,r.kt)("p",null,"When the shipping step of checkout loads the provided ",(0,r.kt)("inlineCode",{parentName:"p"},"ShippingView")," component can be rendered. If you are using an ecommerce platform like Magento, it fully replaces Magento\u2019s stock shipping methods list."),(0,r.kt)("p",null,"When the user has filled out the shipping address form Magento\u2019s estimate-shipping API should be called. This sets up the shipping quote in SHQ\u2019s systems and provides Magento with a starting shipping rate and some other needed metadata."),(0,r.kt)("p",null,"Once estimate-shipping has succeeded, ",(0,r.kt)("inlineCode",{parentName:"p"},"RMCComponent.usePlatformState.setIsShippingAddressValid"),", as well as ",(0,r.kt)("inlineCode",{parentName:"p"},"RMCComponent.usePlatformState.rates.setRates"),", can be used to notify RMC that rates are ready.\nRMC will call the SHQ servers to get a more detailed shipping view and will render results to the user."),(0,r.kt)("p",null,"RMC will handle shipping method selection and storage. "),(0,r.kt)("h2",{id:"react-components"},"React Components"),(0,r.kt)("p",null,"The main logic for checkout is in App.js. "),(0,r.kt)("p",null,"Import ",(0,r.kt)("inlineCode",{parentName:"p"},"RMCComponent")," from the provided ZIP file. The root component for the shipping rates widget is ",(0,r.kt)("inlineCode",{parentName:"p"},"RMCComponent.ShippingView"),"."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"RMCComponent.I18NProvider")," HOF provides translation data for the widget. An example translation file is included in RMCComponent/locales/en/shq.json. Use ",(0,r.kt)("inlineCode",{parentName:"p"},"I18NProvider")," near the top of your app, before ",(0,r.kt)("inlineCode",{parentName:"p"},"ShippingView"),"."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"RMCComponent.RateSubscription")," is responsible for subscribing to updates from a GraphQL subscription and updating the UI with the latest rates. The ",(0,r.kt)("inlineCode",{parentName:"p"},"onCompletes")," callback function is called when the subscription is completed. The component unsubscribes when ",(0,r.kt)("inlineCode",{parentName:"p"},"ShippingView")," unmounts. This should wrap around ",(0,r.kt)("inlineCode",{parentName:"p"},"ShippingView"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"getUpdateKey()")," is used to signal that rates have been updated. This is needed to show the updated UI, containing rates. "),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"RMCComponent.CartItemsProvider")," is a context provider to feed item details to the shipping view. It should wrap around the ",(0,r.kt)("inlineCode",{parentName:"p"},"RateSubscription")," component. "),(0,r.kt)("p",null,"The request in ",(0,r.kt)("inlineCode",{parentName:"p"},"useFetchRates")," is specific to this checkout and should be modified to fit your checkout experience. See our ",(0,r.kt)("a",{parentName:"p",href:"https://dev.shipperhq.com/rates-service"},"GraphQL docs")," for more information on the data structure and descriptions. "),(0,r.kt)("h2",{id:"global-state"},"Global State"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"useAppState")," hook controls properties related to the checkout application state as a whole, such as carrier info, shipping methods, shipping total, carrier pickup locations, etc."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"usePlatformState")," hook controls properties related to specific platform state, such as price formatting, UI locking, backup rates, etc."))}d.isMDXComponent=!0}}]);