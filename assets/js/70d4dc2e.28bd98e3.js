"use strict";(self.webpackChunkdev_shipperhq=self.webpackChunkdev_shipperhq||[]).push([[5488],{3905:function(e,t,r){r.d(t,{Zo:function(){return d},kt:function(){return u}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),l=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},d=function(e){var t=l(e.components);return n.createElement(s.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),c=l(r),u=a,m=c["".concat(s,".").concat(u)]||c[u]||h[u]||o;return r?n.createElement(m,i(i({ref:t},d),{},{components:r})):n.createElement(m,i({ref:t},d))}));function u(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=c;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:a,i[1]=p;for(var l=2;l<o;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}c.displayName="MDXCreateElement"},8168:function(e,t,r){r.r(t),r.d(t,{assets:function(){return d},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return p},metadata:function(){return l},toc:function(){return h}});var n=r(3117),a=r(102),o=(r(7294),r(3905)),i=["components"],p={slug:"place-order",title:"PlaceOrder Mutation",authors:[],tags:["rating","insight","api","introduction"]},s="Overview",l={unversionedId:"insight/place-order",id:"insight/place-order",title:"PlaceOrder Mutation",description:"How Rating + Shipping Insights Works with the PlaceOrder mutation",source:"@site/docs/insight/place-order.md",sourceDirName:"insight",slug:"/insight/place-order",permalink:"/docs/insight/place-order",editUrl:"https://github.com/shipperhq/shipperhq.github.io/tree/main/dev-shipperhq/docs/insight/place-order.md",tags:[{label:"rating",permalink:"/docs/tags/rating"},{label:"insight",permalink:"/docs/tags/insight"},{label:"api",permalink:"/docs/tags/api"},{label:"introduction",permalink:"/docs/tags/introduction"}],version:"current",frontMatter:{slug:"place-order",title:"PlaceOrder Mutation",authors:[],tags:["rating","insight","api","introduction"]},sidebar:"ShippingInsights",previous:{title:"Shipping Insights FAQ",permalink:"/docs/insight/faq"}},d={},h=[{value:"How Rating + Shipping Insights Works with the <code>PlaceOrder</code> mutation",id:"how-rating--shipping-insights-works-with-the-placeorder-mutation",level:2},{value:"Do I need to use the <code>PlaceOrder</code> mutation?",id:"do-i-need-to-use-the-placeorder-mutation",level:2},{value:"Endpoint",id:"endpoint",level:2},{value:"Request Headers",id:"request-headers",level:2},{value:"Example Request",id:"example-request",level:2},{value:"Example Response",id:"example-response",level:2},{value:"Example Error Response",id:"example-error-response",level:2}],c={toc:h};function u(e){var t=e.components,r=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"overview"},"Overview"),(0,o.kt)("h2",{id:"how-rating--shipping-insights-works-with-the-placeorder-mutation"},"How Rating + Shipping Insights Works with the ",(0,o.kt)("inlineCode",{parentName:"h2"},"PlaceOrder")," mutation"),(0,o.kt)("p",null,"Merchants integrate with ShipperHQ's rating API to provide shipping rate estimates based on contents of a ",(0,o.kt)("inlineCode",{parentName:"p"},"virtual cart"),". This is done leveraging the ",(0,o.kt)("a",{parentName:"p",href:"/docs/rate/overview"},"Rate API"),".  "),(0,o.kt)("p",null,"Once a customer has finalized their choices at checkout and completes the order, the rating (a quote) needs to be converted into an order so it can stored for use with the ",(0,o.kt)("a",{parentName:"p",href:"overview"},"Insight API"),". Usually, multiple quotes are sent by ShipperHQ (for example in the cart, when the customer changes their address, when they changes delivery options, etc.)."),(0,o.kt)("p",null,"The role of ",(0,o.kt)("inlineCode",{parentName:"p"},"PlaceOrder")," is to convert one of these quotes into a full fledge order so that the complete quote information can be stored on ShipperHQ order database and later on retrieved via the ",(0,o.kt)("a",{parentName:"p",href:"/docs/insight/overview"},"Insight API"),"."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Most users don't need to use the ",(0,o.kt)("inlineCode",{parentName:"h5"},"PlaceOrder")," mutation")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If you are using an eCommerce platform supported by ShipperHQ (",(0,o.kt)("a",{parentName:"p",href:"https://docs.shipperhq.com/installing-magento-2-shipperhq-extension/"},"Magento/Adobe Commerce"),", ",(0,o.kt)("a",{parentName:"p",href:"https://docs.shipperhq.com/setup-shipperhq-bigcommerce-store/"},"BigCommerce"),", ",(0,o.kt)("a",{parentName:"p",href:"https://docs.shipperhq.com/connect-shopify-shipperhq/"},"Shopify"),", ",(0,o.kt)("a",{parentName:"p",href:"https://docs.shipperhq.com/installing-salesforce/"},"SalesForce B2C Commerce Cloud"),", ",(0,o.kt)("a",{parentName:"p",href:"https://docs.shipperhq.com/install-woocommerce-plugin/"},"WooCommerce"),", ",(0,o.kt)("a",{parentName:"p",href:"https://docs.shipperhq.com/install-shipperhq-zoey/"},"Zoey")," - ",(0,o.kt)("a",{parentName:"p",href:"https://shipperhq.com/pricing"},"complete list here"),"): you do not need to use ",(0,o.kt)("inlineCode",{parentName:"p"},"PlaceOrder"),". In these scenarios, the order creation is done automatically by the platform using ShipperHQ rates and ShipperHQ captures this information automatically so that you can directly use the ",(0,o.kt)("a",{parentName:"p",href:"/docs/insight/overview"},"Insight API"),"."),(0,o.kt)("p",{parentName:"div"},"The specific scenarios where you would need to use ",(0,o.kt)("inlineCode",{parentName:"p"},"PlaceOrder")," are detailed below."))),(0,o.kt)("h2",{id:"do-i-need-to-use-the-placeorder-mutation"},"Do I need to use the ",(0,o.kt)("inlineCode",{parentName:"h2"},"PlaceOrder")," mutation?"),(0,o.kt)("p",null,"You need to use the ",(0,o.kt)("inlineCode",{parentName:"p"},"PlaceOrder")," mutation if:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"you use a platform that does not have a native ShipperHQ integration (",(0,o.kt)("a",{parentName:"li",href:"https://shipperhq.com/pricing"},"supported platform list here"),")"),(0,o.kt)("li",{parentName:"ul"},"you want to capture orders outside of the platform (e.g. going headless, building a mobile app, etc.)"),(0,o.kt)("li",{parentName:"ul"},"you want to implement a different order capture mechanism on a supported platform (from your CRM, an ERP) leveraging the ",(0,o.kt)("a",{parentName:"li",href:"/docs/rate/overview"},"Rate API"))),(0,o.kt)("p",null,"To successfully call ",(0,o.kt)("inlineCode",{parentName:"p"},"PlaceOrder"),", you need to generate rates via the ",(0,o.kt)("a",{parentName:"p",href:"/docs/rate/overview"},"Rate API")," first."),(0,o.kt)("h2",{id:"endpoint"},"Endpoint"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Protocol"),(0,o.kt)("th",{parentName:"tr",align:null},"Method"),(0,o.kt)("th",{parentName:"tr",align:null},"Body Encoding"),(0,o.kt)("th",{parentName:"tr",align:null},"Endpoint URL"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"HTTPS")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"POST")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"application/JSON")),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("a",{parentName:"td",href:"https://postapi.shipperhq.com/v3/graphql/label"},"https://postapi.shipperhq.com/v3/graphql/label"))))),(0,o.kt)("h2",{id:"request-headers"},"Request Headers"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Header"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"X-ShipperHQ-Secret-Token")),(0,o.kt)("td",{parentName:"tr",align:null},"The secret token that you have generated to use the ",(0,o.kt)("a",{parentName:"td",href:"/docs/rate/overview"},"Rate API"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"X-ShipperHQ-Scope")),(0,o.kt)("td",{parentName:"tr",align:null},"The configuration ",(0,o.kt)("a",{parentName:"td",href:"https://docs.shipperhq.com/using-scopes-shipperhq/"},"Scope")," for this ShipperHQ ",(0,o.kt)("a",{parentName:"td",href:"https://docs.shipperhq.com/adding-websites-in-shipperhq/"},"Website")," (accepts ",(0,o.kt)("inlineCode",{parentName:"td"},"LIVE"),", ",(0,o.kt)("inlineCode",{parentName:"td"},"TEST"),", ",(0,o.kt)("inlineCode",{parentName:"td"},"DEVELOPMENT"),", or ",(0,o.kt)("inlineCode",{parentName:"td"},"INTEGRATION"),"). If unsure or if the ShipperHQ account does not support multiple scopes, use ",(0,o.kt)("inlineCode",{parentName:"td"},"LIVE"),".")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"X-ShipperHQ-Session")),(0,o.kt)("td",{parentName:"tr",align:null},"This identifies the quote that you want to convert to an order. You have to use the exact same value as the ",(0,o.kt)("a",{parentName:"td",href:"/docs/rate/overview"},"Rate API")," request used to generate this quote.")))),(0,o.kt)("h2",{id:"example-request"},"Example Request"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example Request"',title:'"Example','Request"':!0},'query placeOrder {\n  placeOrder( placeOrderInfo: {\n    orderNumber: "1234",      \n     totalCharges: 9.85,                    # totalCharges in rating API response\n     carrierCode: "shqusps",                # carrierCode in rating API response   \n     methodCode: "Priority Mail",           # methodCode in rating API response\n     transId: "SHQ_20220201_1625_5144966"   # transactionID from rating API response\n  }) {\n     transactionId\n     responseSummary{\n        status\n    }\n    errors {\n      errorCode\n      internalErrorMessage\n      externalErrorMessage\n    }\n  }\n}\n')),(0,o.kt)("h2",{id:"example-response"},"Example Response"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example response"',title:'"Example','response"':!0},"{\n    \u201cplaceOrder: {\n      \u201ctransactionId\u201d : \u201cSHQ_20220212_12345678_BAQ_639272\u201d,\n      \u201cresponseSummary\u201d: {\n        \u201cstatus\u201d: 1\n      },\n      \u201cerrors\u201d: null\n    }\n}\n")),(0,o.kt)("h2",{id:"example-error-response"},"Example Error Response"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Error response"',title:'"Error','response"':!0},'{\n    \u201cplaceOrder: {\n       \u201ctransactionId": \u201cSHQ_20220212_12345678_BAQ_639273\u201d,\n      \u201cresponseSummary\u201d: {\n        \u201cstatus\u201d: 0\n      },\n      \u201cerrors\u201d: [\n        {\n          "errorCode": 0,\n          "internalErrorMessage": "Order not found when looking up",\n          "externalErrorMessage": null\n        }\n      ]\n    }\n}\n')))}u.isMDXComponent=!0}}]);