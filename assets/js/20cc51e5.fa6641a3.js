"use strict";(self.webpackChunkdev_shipperhq=self.webpackChunkdev_shipperhq||[]).push([[1002],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return c}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),p=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return i.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),h=p(n),c=a,m=h["".concat(l,".").concat(c)]||h[c]||d[c]||r;return n?i.createElement(m,o(o({ref:t},u),{},{components:n})):i.createElement(m,o({ref:t},u))}));function c(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var p=2;p<r;p++)o[p]=n[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},2698:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return c},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return d}});var i=n(3117),a=n(102),r=(n(7294),n(3905)),o=["components"],s={sidebar_position:5,tags:["rating","api","quickstart"]},l="Authentication and access",p={permalink:"/blog/quickstart_old",editUrl:"https://github.com/shipperhq/shipperhq.github.io/tree/main/dev-shipperhq/blog/quickstart_old.md",source:"@site/blog/quickstart_old.md",title:"Authentication and access",description:"Authentication Process",date:"2022-02-18T16:00:56.000Z",formattedDate:"February 18, 2022",tags:[{label:"rating",permalink:"/blog/tags/rating"},{label:"api",permalink:"/blog/tags/api"},{label:"quickstart",permalink:"/blog/tags/quickstart"}],readingTime:14.755,truncated:!1,authors:[],frontMatter:{sidebar_position:5,tags:["rating","api","quickstart"]},nextItem:{title:"Welcome",permalink:"/blog/welcome"}},u={authorsImageUrls:[]},d=[{value:"Authentication Process",id:"authentication-process",level:2},{value:"Access Scope of the rating API",id:"access-scope-of-the-rating-api",level:2},{value:"How to get your API Key (for a single Website)",id:"how-to-get-your-api-key-for-a-single-website",level:2},{value:"How to get your Authentication Code (for a single Website)",id:"how-to-get-your-authentication-code-for-a-single-website",level:2},{value:"For new ShipperHQ deployment on manually connected platforms (Magento/Adobe Commerce, Zoey, WooCommerce, etc.)",id:"for-new-shipperhq-deployment-on-manually-connected-platforms-magentoadobe-commerce-zoey-woocommerce-etc",level:3},{value:"For Single Sign On platforms: BigCommerce and Shopify",id:"for-single-sign-on-platforms-bigcommerce-and-shopify",level:3},{value:"For existing (in production or in development) ShipperHQ Websites",id:"for-existing-in-production-or-in-development-shipperhq-websites",level:3},{value:"If unsure: please contact support!",id:"if-unsure-please-contact-support",level:3},{value:"How to generate your JWT Authentication Token (for a single Website)",id:"how-to-generate-your-jwt-authentication-token-for-a-single-website",level:2},{value:"Request Headers",id:"request-headers",level:2},{value:"GraphQL Ratings API Benefits",id:"graphql-ratings-api-benefits",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Ratings Workflow",id:"ratings-workflow",level:2},{value:"Retrieving Rating Information",id:"retrieving-rating-information",level:2},{value:"GraphQL API URL and Limits",id:"graphql-api-url-and-limits",level:2},{value:"Request Definitions",id:"request-definitions",level:2},{value:"Item Attributes",id:"item-attributes",level:2},{value:"Requested Options",id:"requested-options",level:2},{value:"Preparing Queries in GraphQL Playground",id:"preparing-queries-in-graphql-playground",level:2},{value:"Basic Rating GraphQL API",id:"basic-rating-graphql-api",level:2},{value:"Example: Rate Request",id:"example-rate-request",level:3},{value:"Example: Rate response",id:"example-rate-response",level:3},{value:"Detailed Shipping Rates GraphQL API",id:"detailed-shipping-rates-graphql-api",level:2},{value:"Example Variables",id:"example-variables",level:4},{value:"Example Queries",id:"example-queries",level:3},{value:"Example: Retrieve shipping quote with scheduling option",id:"example-retrieve-shipping-quote-with-scheduling-option",level:4},{value:"Example: Rate request for LTL carriers",id:"example-rate-request-for-ltl-carriers",level:4},{value:"Example: Rate breakdown for multiple shipment or multiple origins",id:"example-rate-breakdown-for-multiple-shipment-or-multiple-origins",level:4},{value:"Errors",id:"errors",level:3}],h={toc:d};function c(e){var t=e.components,s=(0,a.Z)(e,o);return(0,r.kt)("wrapper",(0,i.Z)({},h,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"authentication-process"},"Authentication Process"),(0,r.kt)("p",null,"To use the ShipperHQ rating API you need to generate a JWT authentication token. This is a three step process:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Get ShipperHQ API Key"),(0,r.kt)("li",{parentName:"ol"},"Get Authentication Code"),(0,r.kt)("li",{parentName:"ol"},"Generate a JWT access token (valid 30 days)")),(0,r.kt)("h2",{id:"access-scope-of-the-rating-api"},"Access Scope of the rating API"),(0,r.kt)("p",null,"Before we dig into the specifics, it is important to define the access scope for the API Key, the Authentication Code and the JWT Access Token. Each of these elements are specific to a single ShipperHQ Website."),(0,r.kt)("p",null,"You can think of a Website as a sale channel for instance an online store in the US (production), an online store in Canada (production) a development store, a CRM sales channel (offline sales)."),(0,r.kt)("p",null,"Because ShipperHQ supports multiple Websites, each Website can have its own Shipping rules. Each Website will, as a consequence, generate different type of rates for the same virtual cart and customer choices."),(0,r.kt)("p",null,"To reflect this level of functionality, authorization and access to the rating API is specific to a Website: you need a different set of credentials for each ShipperHQ Website. "),(0,r.kt)("p",null,"For more information about ShipperHQ Website, please visit our ",(0,r.kt)("a",{parentName:"p",href:"https://docs.shipperhq.com/adding-websites-in-shipperhq/"},"customer documentation"),"."),(0,r.kt)("h2",{id:"how-to-get-your-api-key-for-a-single-website"},"How to get your API Key (for a single Website)"),(0,r.kt)("p",null,"The API key is accessible on all platforms at all time via ShipperHQ dashboard."),(0,r.kt)("p",null,"To get the API key:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Visite the ",(0,r.kt)("a",{parentName:"li",href:"https://shipperhq.com/ratesmgr/websites"},"Websites")," section of the dashboard."),(0,r.kt)("li",{parentName:"ol"},"Select the Website you want to get the key from"),(0,r.kt)("li",{parentName:"ol"},"Select the ",(0,r.kt)("inlineCode",{parentName:"li"},"API key")," and copy it to your application")),(0,r.kt)("h2",{id:"how-to-get-your-authentication-code-for-a-single-website"},"How to get your Authentication Code (for a single Website)"),(0,r.kt)("h3",{id:"for-new-shipperhq-deployment-on-manually-connected-platforms-magentoadobe-commerce-zoey-woocommerce-etc"},"For new ShipperHQ deployment on manually connected platforms (Magento/Adobe Commerce, Zoey, WooCommerce, etc.)"),(0,r.kt)("p",null,"On these platforms, you can generate yourself a new Authentication Code yourself."),(0,r.kt)("h3",{id:"for-single-sign-on-platforms-bigcommerce-and-shopify"},"For Single Sign On platforms: BigCommerce and Shopify"),(0,r.kt)("h3",{id:"for-existing-in-production-or-in-development-shipperhq-websites"},"For existing (in production or in development) ShipperHQ Websites"),(0,r.kt)("h3",{id:"if-unsure-please-contact-support"},"If unsure: please contact support!"),(0,r.kt)("h2",{id:"how-to-generate-your-jwt-authentication-token-for-a-single-website"},"How to generate your JWT Authentication Token (for a single Website)"),(0,r.kt)("p",null,"Once you have your ShipperHQ API Key and ShipperHQ Authentication code, you have to generate a JWT token to access ShipperHQ rating API."),(0,r.kt)("p",null,"Use the following steps to create an Authentication token for testing. You will need to use this same query in your integration to create secret tokens when required, as they expire after 30 days. "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Navigate to the ShipperHQ GraphQL playground."),(0,r.kt)("li",{parentName:"ul"},"Click Add New in the top left corner. "),(0,r.kt)("li",{parentName:"ul"},"Set the URL to ",(0,r.kt)("a",{parentName:"li",href:"https://rms.shipperhq.com"},"https://rms.shipperhq.com"),"."),(0,r.kt)("li",{parentName:"ul"},"Click the Reload Docs button. "),(0,r.kt)("li",{parentName:"ul"},"Send a createSecretToken mutation with your API Key and Authentication Code. ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Create a secret token"',title:'"Create',a:!0,secret:!0,'token"':!0},'mutation CreateSecretToken { \n   createSecretToken(\n      api_key: "your_api_key",\n      auth_code: "your_auth_code"\n      )\n      { \n        token \n      } \n}\n')),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"We use JWT and the token has a 30 days expiration date")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The response contains the token you use to make requests to the ShipperHQ API. This token expires every 30 days. You can request a new token up to an hour before your current token expiration date and time. The token is a ",(0,r.kt)("a",{parentName:"p",href:"https://jwt.io/"},"JWT token")," and they have an expiration timestamp encoded inside: no need to remember the expiration date. We recommend using your favorite ",(0,r.kt)("a",{parentName:"p",href:"https://jwt.io/"},"JWT")," parsing library to extract the expiration from the token, so you will know the exact second the token expires."))),(0,r.kt)("h1",{id:"requests"},"Requests"),(0,r.kt)("h2",{id:"request-headers"},"Request Headers"),(0,r.kt)("p",null,"Any query or request must include the following headers"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"X-ShipperHQ-Secret-Token")," \u2013 This is the Secret token you have generated for your ShipperHQ account (see Authentication section)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"X-ShipperHQ-Scope")," \u2013 This is the SCOPE from your SHQ account"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"X-ShipperHQ-Session")," \u2013 This identifies a cart/order, use any unique value")),(0,r.kt)("h1",{id:"quickstart"},"Quickstart"),(0,r.kt)("p",null,"This document is intended for technical architects and developers that need to integrate with ShipperHQ\u2019s Rating API to build their own integration to retrieve shipping rates from ShipperHQ."),(0,r.kt)("p",null,"Use the information outlined in this document to view how custom fields and attributes are queried and modified."),(0,r.kt)("p",null,"Note, this does not document the standard types and fields the API provides. This information is found in the GraphQL schema and obtained via our GraphQL playground. Please refer to the Introduction to GraphQL article from Graphql.org for more information about GraphQL. "),(0,r.kt)("h2",{id:"graphql-ratings-api-benefits"},"GraphQL Ratings API Benefits"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Flexibility: The GraphQL Ratings API gives users the ability to access the details used to obtain the shipping rate and query what is most important to you and your business. As such, you can query 5 pieces of information or every possible field as you see fit."),(0,r.kt)("li",{parentName:"ul"},"Customization: The GraphQL Ratings API  givesusers the ability to build their own integration into ShipperHQ to retrieve shipping rates. For example, you can use it to get shipping rates into your order processing system or build a custom integration from you eCommerce cart."),(0,r.kt)("li",{parentName:"ul"},"Split Shipments: The GraphQL Ratings API enables users to leverage multi-origin fulfillment and split shipping and product groups at checkout. Retrieve tailored shipping rates and methods for each item in the order based on their shipping origin and/or product group! This way, your customer\u2019s order does not have to be limited by the item with the longest shipping time. ")),(0,r.kt)("h2",{id:"getting-started"},"Getting Started"),(0,r.kt)("p",null,"ShipperHQ\u2019s classic rating service provides rating to BigCommerce, Shopify, and Magento eCommerce platforms. The Ratings API uses GraphQL to allow for faster and more efficient API calls and PWA-compatibility."),(0,r.kt)("p",null,"Please refer to the Introduction to GraphQL article from Graphql.org for more information about GraphQL. "),(0,r.kt)("h2",{id:"ratings-workflow"},"Ratings Workflow"),(0,r.kt)("p",null,"ShipperHQ can calculate shipping rates based on your shipping strategy. "),(0,r.kt)("p",null,"Submit a request that includes the contents of the cart, like item\u2019s weight, value and quantity and include destination address information\nCan include any other shipping options required like liftgate,  residential address or specific dates for delivery\nOur API will return shipping rates for the cart using your ShipperHQ configured rules and carriers\nDepending on whether you choose to request simple rates or full shipping rates, we can return basic rate information or full details of carriers, shipments, dates and shipping options available."),(0,r.kt)("h2",{id:"retrieving-rating-information"},"Retrieving Rating Information"),(0,r.kt)("p",null,"You can retrieve shipping rates by querying the Rating GraphQL API. "),(0,r.kt)("h2",{id:"graphql-api-url-and-limits"},"GraphQL API URL and Limits"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Endpoint URL: The current GraphQL API endpoint is at ",(0,r.kt)("a",{parentName:"li",href:"https://api.shipperhq.com/v2/graphql"},"https://api.shipperhq.com/v2/graphql")," and all requests must be ",(0,r.kt)("inlineCode",{parentName:"li"},"HTTP POST")," requests with ",(0,r.kt)("inlineCode",{parentName:"li"},"application/JSON")," encoded bodies."),(0,r.kt)("li",{parentName:"ul"},"Request Limits:  These queries are subject to your request limits. Please view your request limits on ShipperHQ\u2019s pricing page."),(0,r.kt)("li",{parentName:"ul"},"Monitoring Request limits: Review your requests within your ShipperHQ analytics dashboard.")),(0,r.kt)("h2",{id:"request-definitions"},"Request Definitions"),(0,r.kt)("p",null,"The ShipperHQ rating API includes the following three queries. "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Query"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"retrieveShippingQuote")),(0,r.kt)("td",{parentName:"tr",align:null},"Retrieve basic shipping rates including carrier and method titles and total shipping charges.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"retrieveFullShippingQuote")),(0,r.kt)("td",{parentName:"tr",align:null},"Retrieve detailed shipping rate information for each shipment, including origin or warehouse information, carrier and method information, freight options available, available dates, in-store pickup information, and more.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"retrieveUserSettings")),(0,r.kt)("td",{parentName:"tr",align:null},"Retrieve merchant\u2019s settings like locale and currency.")))),(0,r.kt)("p",null,"You can view the details of queries/mutations, and their descriptions within the ShipperHQ GraphQL playground. "),(0,r.kt)("p",null,"Use your own tool or navigate to ShipperHQ\u2019s playground to view any GraphQL queries. Follow the procedure outlined below to use GraphQL."),(0,r.kt)("p",null,"Navigate to the ShipperHQ GraphQL playground.\nIn a new GraphQL playground window, enter ",(0,r.kt)("a",{parentName:"p",href:"https://api.shipperhq.com/v2/graphql"},"https://api.shipperhq.com/v2/graphql")," into the URL."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Click the Docs button."),(0,r.kt)("li",{parentName:"ul"},"Click the Reload Docs icon."),(0,r.kt)("li",{parentName:"ul"},"Click the Query link to view a list of available queries and the arguments and fields you can include in your request.\nYou can also view the structure of the ratingInfo required as a parameter in your request.")),(0,r.kt)("p",null,(0,r.kt)("img",{loading:"lazy",alt:"GraphiQL example",src:n(6998).Z,width:"1104",height:"612"})),(0,r.kt)("h2",{id:"item-attributes"},"Item Attributes"),(0,r.kt)("p",null,"Item attributes in the request allow you to include item-specific values like a shipping group or an origin. They are required if you are using any type of features such as carrier rules, dimensional shipping, multi-origin, etc. The most common attributes are listed below. "),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Values are case sensitive and require delimiter")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"All values are case sensitive and require a delimiter between multiple values. The default delimiter is a comma, but if your data is already separated by hashes (#), it is required for you to set the appVersion to 2.0.0 within the siteDetails."))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attribute Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"shipperhq_shipping_group")),(0,r.kt)("td",{parentName:"tr",align:null},"This is used to place the shipping group on an item to match carrier rules.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"shipperhq_warehouse")),(0,r.kt)("td",{parentName:"tr",align:null},"This is used if you are using multi-origin functionality in order to specify which origin(s) are applicable for an item. These values are separated by the \u201c#\u2019 character and must match origin names configured in ShipperHQ.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"shipperhq_dim_group")),(0,r.kt)("td",{parentName:"tr",align:null},"This is used if you have created any dimensional rules for your items to be packed in a specific way.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ship_length"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"ship_width"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"ship_height")),(0,r.kt)("td",{parentName:"tr",align:null},"These are used if you are placing dimensions on items; Note, you must include all 3 attributes when using this query.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ship_separately")),(0,r.kt)("td",{parentName:"tr",align:null},"This allows for the item to be packed separately into its own box when used for rating.")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Attribute example"',title:'"Attribute','example"':!0},'    "attributes" : [ {\n        "name" : "shipperhq_shipping_group",\n        "value" : "FLAT59,FREE"\n      }, {\n        "name" : "ship_width",\n        "value" : "2.0000"\n      }, {\n        "name" : "ship_length",\n        "value" : "2.0000"\n      }, {\n        "name" : "ship_height",\n        "value" : "36.0000"\n      }, {\n        "name" : "shipperhq_dim_group",\n        "value" : "RULE1,RULE2"\n      }, {\n        "name" : "shipperhq_hs_code",\n        "value" : "123456"\n      }, {\n        "name" : "shipperhq_warehouse",\n        "value" : "ORIGIN1,ORIGIN2"\n      } ], \n')),(0,r.kt)("h2",{id:"requested-options"},"Requested Options"),(0,r.kt)("p",null,"Requested Options in the requestedOptions field in the request allow you to include services for the entire shipment such as Liftgate or Residential delivery. These are useful if you are using Freight carriers or small package carriers that offer specific delivery methods for residential delivery. The most common attributes are listed below. "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Requested Options"),(0,r.kt)("th",{parentName:"tr",align:null},"Data Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"liftgate_required")),(0,r.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"This specifies liftgate is required at the destination.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"notify_required")),(0,r.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"This requests an appointment delivery or notice of delivery.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"inside_delivery")),(0,r.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"This requests delivery inside the destination.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"limited_delivery")),(0,r.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"This specifies limited access at the destination address.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"destination_type")),(0,r.kt)("td",{parentName:"tr",align:null},"Boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"This specifies if a destination is a Residential or Business address and is used for freight and small package shipments.")))),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"All values are case-sensitive")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Available options"',title:'"Available','options"':!0},'requestedOptions: {\n   options: [\n   {\n       code: "liftgate_required",\n       value:  "true"\n   },\n   {\n       code: "destination_type",\n       value: "residential"\n   }]}   \n')),(0,r.kt)("h2",{id:"preparing-queries-in-graphql-playground"},"Preparing Queries in GraphQL Playground"),(0,r.kt)("p",null,"Use the following process to use the GraphQL Playground. Include the required Headers before writing a query within GraphQL Playground."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"https://graphiql.shipperhq.com/"},"https://graphiql.shipperhq.com/")," to access our GraphQL Playground."),(0,r.kt)("li",{parentName:"ul"},"Set the URL to ",(0,r.kt)("a",{parentName:"li",href:"https://api.shipperhq.com/v2/graphql"},"https://api.shipperhq.com/v2/graphql"),". "),(0,r.kt)("li",{parentName:"ul"},"Click the star shaped icon on the left. This is the headers button."),(0,r.kt)("li",{parentName:"ul"},"Use the following Headers:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"X-ShipperHQ-Secret-Token \u2013 This is the Secret token you have generated for your ShipperHQ account (see Authentication section)\nX-ShipperHQ-Scope \u2013 This is the SCOPE from your SHQ account\nX-ShipperHQ-Session \u2013 This identifies a cart/order, use any value\n")),(0,r.kt)("p",null,"After the headers are entered, you can input the query you want to test into the field box provided and before clicking the Send Request button. The results are displayed in the pane on the right."),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"How to add variables?")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"You can add variables by clicking the Variables button (icon of stacked boxes) on the left toolbar. These variables are entered in JSON format."))),(0,r.kt)("h1",{id:"examples"},"Examples"),(0,r.kt)("h2",{id:"basic-rating-graphql-api"},"Basic Rating GraphQL API"),(0,r.kt)("h3",{id:"example-rate-request"},"Example: Rate Request"),(0,r.kt)("p",null,"This example does not flush out the multi-origin logic. Please view the Detailed Shipping Rate GraphQL API portion of this document for more information. The following example is an MVP setup. "),(0,r.kt)("p",null,"Attach the shipping_group attribute at a product-level if you wish to use carrier rules."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example to fetch a basic quote"',title:'"Example',to:!0,fetch:!0,a:!0,basic:!0,'quote"':!0},'#\n# Fetches a basic quote\n#\n# If there are multiple shipments/warehouses they will be simplified\n# into a single "merged" carrier. This makes this call suitable for use in\n# platforms that expect a single shipping method per order\n#\n\nquery retrieveShippingQuote {\n   retrieveShippingQuote(ratingInfo: {\n    cart: {\n      items: [\n        {\n          itemId: "12"\n          sku: "tables"\n          storePrice: 12.00\n          weight: 1.00\n          qty:1\n          type: SIMPLE\n          attributes:[\n              {\n                name:"shipperhq_shipping_group",\n                value:"bulky"\n              }\n            ],\n        }\n      ]\n    },\n    destination: {\n      country: "US"\n      region: "TX"\n      city: "Austin"\n      zipcode: "78735"\n\n    },\n      siteDetails: {\n          appVersion: "x.x.x",\n          ecommerceCart: "Your Integrated Platform",\n          ecommerceVersion: "x.x.x",\n          websiteUrl: "www.yoursite.com",\n          ipAddress: "0.0.0.0"\n      }\n  }) {\n    transactionId\n    carriers {\n      carrierCode\n      carrierTitle\n      carrierType\n      error {\n        errorCode\n        internalErrorMessage\n        externalErrorMessage\n        priority\n      }\n      shippingRates {\n        code\n        title\n        totalCharges\n      }\n    }\n    errors {\n      errorCode\n      internalErrorMessage\n      externalErrorMessage\n      priority\n    }\n  }\n}\n')),(0,r.kt)("h3",{id:"example-rate-response"},"Example: Rate response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example of a rate response"',title:'"Example',of:!0,a:!0,rate:!0,'response"':!0},'Example: Rate Response\n{\n  "data": {\n    "retrieveShippingQuote": {\n     "transactionId": "SHQ_20210916_1239_MacBook_Pro_2_21508121",\n            "carriers": [\n                {\n                    "carrierCode": "shqcustom1",\n                    "carrierTitle": "Home Delivery",\n                    "shippingRates": [\n                        {\n                            "code": "Standard",\n                            "title": "Standard",\n                            "totalCharges": 55.00\n                        }\n                    ],\n                    "error": null\n                },\n                {\n                    "carrierCode": "shqfedex3",\n                    "carrierTitle": "FedEx\xae",\n                    "shippingRates": [\n                        {\n                            "code": "FEDEX_GROUND",\n                            "title": "Ground",\n                            "totalCharges": 12.09\n                        },\n                        {\n                            "code": "STANDARD_OVERNIGHT",\n                            "title": "Standard Overnight",\n                            "totalCharges": 37.81\n                        }\n                    ],\n                    "error": null\n                },\n                {\n                    "carrierCode": "shqfedex2",\n                    "carrierTitle": "FedEx",\n                    "shippingRates": [],\n                    "error": {\n                        "errorCode": 508,\n                        "internalErrorMessage": "No Valid Rates found for Carrier",\n                        "externalErrorMessage": null,\n                        "priority": 999\n                    }\n                }\n            ],\n            "errors": null\n        }\n  }\n}\n')),(0,r.kt)("h2",{id:"detailed-shipping-rates-graphql-api"},"Detailed Shipping Rates GraphQL API"),(0,r.kt)("p",null,"Use this API request to retrieve detailed shipping rate information including packages, detailed information on shipping rates, date information, rates for each shipment in a multi-origin request."),(0,r.kt)("p",null,"Some example queries are below. For each of these queries, you can submit the ",(0,r.kt)("inlineCode",{parentName:"p"},"ratingInfo")," variable. If you wish to use multi-origin functionality, your request should include the ",(0,r.kt)("inlineCode",{parentName:"p"},"shipperhq_warehouse")," item attribute value."),(0,r.kt)("h4",{id:"example-variables"},"Example Variables"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example for variables"',title:'"Example',for:!0,'variables"':!0},'# \n# These must be included in the variables section of your GraphQL client. This example is # a basic ratingInfo object showing item attributes \n#\n\n{\n  "ratingInfo": {\n    "cart": {\n      "items": [{\n        "itemId": "57",\n        "sku": "25-MB01",\n        "storePrice": 34,\n        "weight": 1,\n        "qty": 1,\n        "type": "SIMPLE",\n        "basePrice": 34,\n        "taxInclBasePrice": null,\n        "taxInclStorePrice": 34,\n        "discountPercent": null,\n        "discountedBasePrice": null,\n        "discountedStorePrice": null,\n        "discountedTaxInclBasePrice": null,\n        "discountedTaxInclStorePrice": null,\n        "attributes": [{\n          "name": "shipperhq_warehouse",\n          "value": "CA Origin,NY Origin"\n        }],\n        "items": null\n      }],\n      "declaredValue": 34\n    },\n    "destination": {\n      "country": "US",\n      "region": "TX",\n      "city": "Austin",\n      "street": "5701 S MoPac Expy",\n      "street2": "#1821",\n      "zipcode": "78749"\n    },\n    "customer": {\n      "customerGroup": "NOT LOGGED IN"\n    },\n    "cartType": "STD",\n    "requestedOptions": null,\n    "siteDetails": {\n      "appVersion": "1.0.0",\n      "ecommerceCart": "Magento 2 Community",\n      "ecommerceVersion": "2.3.1",\n      "websiteUrl": "http://www.example.com",\n      "ipAddress": "12.34.567"\n    }\n  }\n}\n')),(0,r.kt)("h3",{id:"example-queries"},"Example Queries"),(0,r.kt)("p",null,"In this section, let's explore typical queries that may be useful on a regular basis."),(0,r.kt)("h4",{id:"example-retrieve-shipping-quote-with-scheduling-option"},"Example: Retrieve shipping quote with scheduling option"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Query example: Retrieve shipping quote with scheduling"',title:'"Query',"example:":!0,Retrieve:!0,shipping:!0,quote:!0,with:!0,'scheduling"':!0},"# \n# Fetches a detailed quote with calendar details included\n#\n# This query fetches a more detailed copy of the shipping rates\n# it will show the full rate breakdown. Not all fields are included in this\n# example, use the docs to see all available fields.\n#\n# This example uses calendar functionality. You will need to have that enabled on # your account in order to see results with date information\n\nquery RetrieveFullShippingQuote($ratingInfo: RatingInfoInput!) {\n  retrieveFullShippingQuote(ratingInfo: $ratingInfo) {\n    transactionId\n    validationStatus\n    shipments {\n      shipmentDetail {\n        name\n        shipmentId\n      }\n      carriers {\n        carrierDetail {\n          carrierCode\n          carrierTitle\n          carrierType\n        }\n        methods {\n          methodDetails {\n            methodCode\n            methodTitle\n            totalCharges\n          }\n        }\n        calendarDate {\n          availableDeliveryDates\n        }\n        dateFormat\n        error {\n          errorCode\n          internalErrorMessage\n          externalErrorMessage\n          priority\n        }\n      }\n      groupedItems {\n        itemId\n      }\n    }\n    errors {\n      errorCode\n      internalErrorMessage\n      externalErrorMessage\n      priority\n    }\n  }\n}\n")),(0,r.kt)("h4",{id:"example-rate-request-for-ltl-carriers"},"Example: Rate request for LTL carriers"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Query example: rate request for LTL carriers"',title:'"Query',"example:":!0,rate:!0,request:!0,for:!0,LTL:!0,'carriers"':!0},"# \n# Typical request you might use if using LTL carriers - notice the availableOptions\n#\n# \n# This example uses Freight LTL functionality. You will need to have the Freight # LTL feature enabled on your account and freight carriers set up in order to see # results with availableOptions information\n\nquery RetrieveFullShippingQuote($ratingInfo: RatingInfoInput!) {\n  retrieveFullShippingQuote(ratingInfo: $ratingInfo) {\n    transactionId\n    validationStatus\n    shipments {\n      shipmentDetail {\n        name\n        shipmentId\n      }\n      carriers {\n        carrierDetail {\n          carrierCode\n          carrierTitle\n          carrierType\n        }\n        methods {\n          methodDetails {\n            methodCode\n            methodTitle\n            totalCharges\n          }\n        }\n        availableOptions {\n          destinationType\n          insideDelivery\n          liftGateRequired\n          limitedDelivery\n          notifyRequired\n        }\n        error {\n          errorCode\n          internalErrorMessage\n          externalErrorMessage\n          priority\n        }\n      }\n    }\n    errors {\n      errorCode\n      internalErrorMessage\n      externalErrorMessage\n      priority\n    }\n  }\n}\n")),(0,r.kt)("h4",{id:"example-rate-breakdown-for-multiple-shipment-or-multiple-origins"},"Example: Rate breakdown for multiple shipment or multiple origins"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Query example: Rates breakdown for multiple shipment or multiple origins"',title:'"Query',"example:":!0,Rates:!0,breakdown:!0,for:!0,multiple:!0,shipment:!0,or:!0,'origins"':!0},"# \n# Fetches shipping rates and breakdown of rates for multiple shipments/warehouses\n#\n# This query will fetch the merged shipping rate as well as a detailed  \n# breakdown of the shipping rates and packing information. \n#\n# This example uses multi origin functionality. You will need the Multi Origin # # advanced feature enabled, and your request should include multiple items \n# shipping from separate origins or warehouses\n\nquery RetrieveFullShippingQuote($ratingInfo: RatingInfoInput!) {\n  retrieveFullShippingQuote(ratingInfo: $ratingInfo) {\n    transactionId\n    validationStatus\n    shipments {\n      shipmentDetail {\n        name\n        shipmentId\n      }\n      carriers {\n        carrierDetail {\n          carrierCode\n          carrierTitle\n          carrierType\n        }\n        methods {\n          methodDetails {\n            methodCode\n            methodTitle\n            totalCharges\n          }\n          rateBreakdownList {\n            methodCode\n            carrierDetail {\n              carrierCode\n              carrierTitle\n            }\n            methodDetails {\n              totalCharges\n              methodTitle\n              methodCode\n            }\n            packages {\n              items {\n                qtyPacked\n                sku\n                weightPacked\n              }\n              packageDetail {\n                packageName\n                width\n                height\n                length\n                weight\n                declaredValue\n              }\n            }\n          }\n        }\n        packages {\n          items {\n            qtyPacked\n            sku\n            weightPacked\n          }\n          packageDetail {\n            packageName\n            width\n            height\n            length\n            weight\n            declaredValue\n          }\n        }\n        availableOptions {\n          destinationType\n          insideDelivery\n          liftGateRequired\n          limitedDelivery\n          notifyRequired\n        }\n        error {\n          errorCode\n          internalErrorMessage\n          externalErrorMessage\n          priority\n        }\n      }\n    }\n    errors {\n      errorCode\n      internalErrorMessage\n      externalErrorMessage\n      priority\n    }\n  }\n}\n")),(0,r.kt)("h3",{id:"errors"},"Errors"),(0,r.kt)("p",null,"The internal error message describes the issue and is intended to help with your integration. The external error message is taken from your ShipperHQ configuration default error messages and is designed to show for the end-user. Refer to the ShipperHQ Rating API Error Messages documentation for a full list of error messages."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example query: Errors"',title:'"Example',"query:":!0,'Errors"':!0},'"errors": [\n               {\n                   "errorCode": 403,\n                   "internalErrorMessage": "No applicable carriers have been found for this origin.",\n                   "externalErrorMessage": "This shipping method is currently unavailable. If you would like to ship using this shipping method, please contact_us.",\n                   "priority": 999\n               }\n           ] \n')),(0,r.kt)("h1",{id:"additional-resources"},"Additional resources"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.shipperhq.com/rating-error-messages"},"List of ShipperHQ standard error messages"))))}c.isMDXComponent=!0},6998:function(e,t,n){t.Z=n.p+"assets/images/graphiql-example-2021-08-11_10-20-25-a549f8f7932be151e4908afc2182a055.jpeg"}}]);